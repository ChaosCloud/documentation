<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="821.343" height="1038.797"><defs><path transform="matrix(.96592 .25882 -.25905 .9668 306.196 244.624)" d="M279.14 445.025a27.39 53.27 0 1 1 1.292-53.088" id="b" fill="none" stroke="#141414" stroke-width="2" marker-end="url(#a)"/><marker orient="auto" id="a" overflow="visible"><path d="M-10.69-4.437L1.328-.017l-12.018 4.42c1.92-2.61 1.91-6.18 0-8.84z" font-size="12" fill-rule="evenodd" stroke-width=".625" stroke-linejoin="round"/></marker><marker orient="auto" id="c" overflow="visible"><path d="M-10.69-4.437L1.328-.017l-12.018 4.42c1.92-2.61 1.91-6.18 0-8.84z" font-size="12" fill-rule="evenodd" stroke-width=".625" stroke-linejoin="round"/></marker></defs><text y="135.144" x="209.102" style="line-height:125%;-inkscape-font-specification:Georgia" font-size="24" letter-spacing="0" word-spacing="0" font-family="Georgia" transform="translate(-15 -61.946)"><tspan y="135.144" x="209.102">Material Update Service (MUS)</tspan></text><path transform="matrix(.96592 .25882 -.25905 .9668 39.3 -411.712)" d="M279.14 445.025c-8.157 24.776-25.097 32-37.837 16.136-12.74-15.863-16.454-48.81-8.297-73.585 8.158-24.776 25.098-32 37.838-16.136 4.07 5.067 7.378 12.14 9.588 20.497" fill="none" stroke="#141414" stroke-width="2" marker-end="url(#a)"/><text transform="translate(-272.898 -656.336)" style="line-height:125%;-inkscape-font-specification:Georgia" font-size="20" letter-spacing="0" word-spacing="0" font-family="Georgia"><textPath xlink:href="#b"><tspan dx="97.985">Timer</tspan></textPath></text><path d="M212.634 119.416c0 2.76-2.238 5-5 5-2.76 0-5-2.24-5-5 0-2.762 2.24-5 5-5 2.762 0 5 2.238 5 5z" stroke="#141414" stroke-width="2"/><text y="182.621" x="235.366" style="line-height:125%;-inkscape-font-specification:Georgia" font-size="20" letter-spacing="0" word-spacing="0" font-family="Georgia" transform="translate(-7.366 -54.088)"><tspan y="182.621" x="235.366">Finds every material which is schedulable</tspan><tspan y="207.621" x="235.366">(All unique materials of auto pipelines)</tspan></text><path d="M216.52 173.416c0 2.76-2.238 5-5 5-2.76 0-5-2.24-5-5 0-2.762 2.24-5 5-5 2.762 0 5 2.238 5 5z" stroke="#141414" stroke-width="2"/><text style="line-height:125%;-inkscape-font-specification:Georgia" x="235.366" y="182.621" font-size="20" letter-spacing="0" word-spacing="0" font-family="Georgia" transform="translate(-3.48 -.088)"><tspan x="235.366" y="182.621">Puts one message on an activemq queue for</tspan><tspan x="235.366" y="207.621">each of the materials.</tspan></text><path d="M430.648 287.116v67.522" fill="none" stroke="#000" marker-end="url(#a)" transform="translate(-19.994 -57.946)"/><path fill="none" stroke="#000" stroke-width="2" d="M293.85 300.558h233.646v45.014H293.85z"/><text style="line-height:125%;-inkscape-font-specification:Georgia" x="327.228" y="386.402" font-size="20" letter-spacing="0" word-spacing="0" font-family="Georgia" transform="translate(-19.994 -57.946)"><tspan x="327.228" y="386.402">Material Update Queue</tspan></text><g><g transform="translate(-19.995 -57.946)" fill="none" stroke="#000" marker-end="url(#a)"><path d="M403.88 415.585l-90.028 75.024M457.43 415.585l90.028 75.024M419.88 415.585l-47.014 75.168M442.677 415.585l47.014 75.168M430.648 416.214v73.953"/></g><path fill="none" stroke="#000" stroke-width="2" d="M276.164 444.606H545.18v45.014H276.163z"/><text style="line-height:125%;-inkscape-font-specification:Georgia" x="318.584" y="560.45" font-size="20" letter-spacing="0" word-spacing="0" font-family="Georgia" transform="translate(-23.303 -87.946)"><tspan x="318.584" y="560.45">Material Update Listeners</tspan></text><text y="566.849" x="351.079" style="line-height:125%;-inkscape-font-specification:Georgia" font-size="18" letter-spacing="0" word-spacing="0" font-family="Georgia" transform="translate(-37.545 -57.946)"><tspan y="566.849" x="351.079">(By default, 10 listeners)</tspan></text><g font-size="18" letter-spacing="0" word-spacing="0" font-family="Georgia"><text y="602.217" x="303.127" style="line-height:125%;-inkscape-font-specification:Georgia" transform="translate(-49.12 -57.946)"><tspan y="602.217" x="303.127">1. Each listener picks MUS&amp;apos; message off</tspan><tspan y="624.717" x="303.127"> the queue.</tspan></text><text style="line-height:125%;-inkscape-font-specification:Georgia" x="304.279" y="650.217" transform="translate(-49.12 -57.946)"><tspan x="304.279" y="650.217">2. Loads information, from DB, for this</tspan><tspan x="304.279" y="672.717"> material (using MaterialRepository).</tspan></text></g></g><g letter-spacing="0" word-spacing="0" font-family="Georgia"><text y="733.375" x="1" style="line-height:125%;-inkscape-font-specification:Georgia" font-size="18" transform="translate(1 45.27)"><tspan y="733.375" x="1" font-size="20">1. Expand material for history</tspan><tspan y="758.375" x="1" font-size="20"> (Find all SVN externals in</tspan><tspan y="783.375" x="1" font-size="20"> case of SVN).</tspan></text><text style="line-height:125%;-inkscape-font-specification:Georgia" x="-1" y="935.016" font-size="20" transform="translate(1 45.27)"><tspan x="-1" y="935.016">3. Post a message on the &amp;quot;Material</tspan><tspan x="-1" y="960.016"> Update Completed&amp;quot; topic queue</tspan><tspan x="-1" y="985.016"> that an MDU check is done.</tspan></text><text y="821.696" x="1" style="line-height:125%;-inkscape-font-specification:Georgia" font-size="18" transform="translate(1 45.27)"><tspan y="821.696" x="1" font-size="20">2. For the material (or materials</tspan><tspan y="846.696" x="1" font-size="20"> in SVN externals case), find the</tspan><tspan y="871.696" x="1" font-size="20"> latest modification (latest commit</tspan><tspan y="896.696" x="1" font-size="20"> details) and insert that in the DB.</tspan></text></g><g font-size="20" letter-spacing="0" word-spacing="0" font-family="Georgia"><text style="line-height:125%;-inkscape-font-specification:Georgia" x="441" y="720.59" transform="translate(101 58.054)"><tspan x="441" y="720.59">1. Find last known modification for</tspan><tspan x="441" y="745.59"> this material (previous commit</tspan><tspan x="441" y="770.59"> seen by Go).</tspan></text><text y="945.453" x="439" style="line-height:125%;-inkscape-font-specification:Georgia" transform="translate(101 58.054)"><tspan y="945.453" x="439">3. Post a message on the &amp;quot;Material</tspan><tspan y="970.453" x="439"> Update Completed&amp;quot; topic queue</tspan><tspan y="995.453" x="439"> that an MDU check is done.</tspan></text><text style="line-height:125%;-inkscape-font-specification:Georgia" x="441" y="810.043" transform="translate(101 58.054)"><tspan x="441" y="810.043">2. For the material (or materials</tspan><tspan x="441" y="835.043"> in SVN externals case), find all</tspan><tspan x="441" y="860.043"> modifications since (newer than)</tspan><tspan x="441" y="885.043"> the previously seen modification.</tspan><tspan x="441" y="910.043"> Insert them into the DB.</tspan></text></g><g fill="none" stroke="#000"><path d="M412.595 637.67v83.7"/><path d="M377.595 719.138l-266.78-.177-1 33.916M377.815 719.138l266.78-.177 1 33.916" marker-end="url(#c)" transform="translate(35 2.054)"/></g><text style="text-align:center;line-height:125%;-inkscape-font-specification:Georgia" x="109.655" y="747.362" font-size="18" letter-spacing="0" word-spacing="0" text-anchor="middle" font-family="Georgia" transform="translate(35 -57.946)"><tspan x="109.655" y="747.362" style="text-align:center" font-size="14">(If this material has not been</tspan><tspan x="109.655" y="764.862" style="text-align:center" font-size="14">seen by Go before this time)</tspan></text><text y="747.362" x="644" style="text-align:center;line-height:125%;-inkscape-font-specification:Georgia" font-size="18" letter-spacing="0" word-spacing="0" text-anchor="middle" font-family="Georgia" transform="translate(35 -57.946)"><tspan style="text-align:center" y="747.362" x="644" font-size="14">(If this material has been</tspan><tspan style="text-align:center" y="764.862" x="644" font-size="14">seen by Go before)</tspan></text></svg>